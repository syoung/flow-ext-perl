<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../../../displayToc.js"></script>
<script language="JavaScript" src="../../../../tocParas.js"></script>
<script language="JavaScript" src="../../../../tocTab.js"></script>
<title></title>
<link rel="stylesheet" href="../../../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:support@ActiveState.com" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#SYNOPSIS">SYNOPSIS</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a></li>
  <li><a href="#AUTHORS">AUTHORS</a></li>
  <li><a href="#VERSION">VERSION</a></li>
  <li><a href="#COPYRIGHT">COPYRIGHT</a></li>
  <li><a href="#LICENSE">LICENSE</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>XML::LibXML::Error - Structured Errors</p>

<h1 id="SYNOPSIS">SYNOPSIS</h1>

<pre><code>  eval { ... };
          if (ref($@)) {
            # handle a structured error (XML::LibXML::Error object)
          } elsif ($@) {
            # error, but not an XML::LibXML::Error object
          } else {
            # no error
          }

  $XML::LibXML::Error::WARNINGS=1;
  $message = $@-&gt;as_string();
  print $@-&gt;dump();
  $error_domain = $@-&gt;domain();
  $error_code = $@-&gt;code();
  $error_message = $@-&gt;message();
  $error_level = $@-&gt;level();
  $filename = $@-&gt;file();
  $line = $@-&gt;line();
  $nodename = $@-&gt;nodename();
  $error_str1 = $@-&gt;str1();
  $error_str2 = $@-&gt;str2();
  $error_str3 = $@-&gt;str3();
  $error_num1 = $@-&gt;num1();
  $error_num2 = $@-&gt;num2();
  $string = $@-&gt;context();
  $offset = $@-&gt;column();
  $previous_error = $@-&gt;_prev();</code></pre>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>The XML::LibXML::Error class is a tiny frontend to <i>libxml2</i>&#39;s structured error support. If XML::LibXML is compiled with structured error support, all errors reported by libxml2 are transformed to XML::LibXML::Error objects. These objects automatically serialize to the corresponding error messages when printed or used in a string operation, but as objects, can also be used to get a detailed and structured information about the error that occurred.</p>

<p>Unlike most other XML::LibXML objects, XML::LibXML::Error doesn&#39;t wrap an underlying <i>libxml2</i> structure directly, but rather transforms it to a blessed Perl hash reference containing the individual fields of the structured error information as hash key-value pairs. Individual items (fields) of a structured error can either be obtained directly as $@-&gt;{field}, or using autoloaded methods such as $@-&gt;field() (where field is the field name). XML::LibXML::Error objects have the following fields: domain, code, level, file, line, nodename, message, str1, str2, str3, num1, num2, and _prev (some of them may be undefined).</p>

<dl>

<dt id="XML::LibXML::Error::WARNINGS">$XML::LibXML::Error::WARNINGS</dt>
<dd>

<pre><code>  $XML::LibXML::Error::WARNINGS=1;</code></pre>

<p>Traditionally, XML::LibXML was suppressing parser warnings by setting libxml2&#39;s global variable xmlGetWarningsDefaultValue to 0. Since 1.70 we do not change libxml2&#39;s global variables anymore; for backward compatibility, XML::LibXML suppresses warnings. This variable can be set to 1 to enable reporting of these warnings via Perl <code>warn</code> and to 2 to report hem via <code>die</code>.</p>

</dd>
<dt id="as_string">as_string</dt>
<dd>

<pre><code>  $message = $@-&gt;as_string();</code></pre>

<p>This function serializes an XML::LibXML::Error object to a string containing the full error message close to the message produced by <i>libxml2</i> default error handlers and tools like xmllint. This method is also used to overload &quot;&quot; operator on XML::LibXML::Error, so it is automatically called whenever XML::LibXML::Error object is treated as a string (e.g. in print $@).</p>

</dd>
<dt id="dump">dump</dt>
<dd>

<pre><code>  print $@-&gt;dump();</code></pre>

<p>This function serializes an XML::LibXML::Error to a string displaying all fields of the error structure individually on separate lines of the form &#39;name&#39; =&gt; &#39;value&#39;.</p>

</dd>
<dt id="domain">domain</dt>
<dd>

<pre><code>  $error_domain = $@-&gt;domain();</code></pre>

<p>Returns string containing information about what part of the library raised the error. Can be one of: &quot;parser&quot;, &quot;tree&quot;, &quot;namespace&quot;, &quot;validity&quot;, &quot;HTML parser&quot;, &quot;memory&quot;, &quot;output&quot;, &quot;I/O&quot;, &quot;ftp&quot;, &quot;http&quot;, &quot;XInclude&quot;, &quot;XPath&quot;, &quot;xpointer&quot;, &quot;regexp&quot;, &quot;Schemas datatype&quot;, &quot;Schemas parser&quot;, &quot;Schemas validity&quot;, &quot;Relax-NG parser&quot;, &quot;Relax-NG validity&quot;, &quot;Catalog&quot;, &quot;C14N&quot;, &quot;XSLT&quot;, &quot;validity&quot;.</p>

</dd>
<dt id="code">code</dt>
<dd>

<pre><code>  $error_code = $@-&gt;code();</code></pre>

<p>Returns the actual libxml2 error code. The XML::LibXML::ErrNo module defines constants for individual error codes. Currently libxml2 uses over 480 different error codes.</p>

</dd>
<dt id="message">message</dt>
<dd>

<pre><code>  $error_message = $@-&gt;message();</code></pre>

<p>Returns a human-readable informative error message.</p>

</dd>
<dt id="level">level</dt>
<dd>

<pre><code>  $error_level = $@-&gt;level();</code></pre>

<p>Returns an integer value describing how consequent is the error. XML::LibXML::Error defines the following constants:</p>

<ul>

<li><p>XML_ERR_NONE = 0</p>

</li>
<li><p>XML_ERR_WARNING = 1 : A simple warning.</p>

</li>
<li><p>XML_ERR_ERROR = 2 : A recoverable error.</p>

</li>
<li><p>XML_ERR_FATAL = 3 : A fatal error.</p>

</li>
</ul>

</dd>
<dt id="file">file</dt>
<dd>

<pre><code>  $filename = $@-&gt;file();</code></pre>

<p>Returns the filename of the file being processed while the error occurred.</p>

</dd>
<dt id="line">line</dt>
<dd>

<pre><code>  $line = $@-&gt;line();</code></pre>

<p>The line number, if available.</p>

</dd>
<dt id="nodename">nodename</dt>
<dd>

<pre><code>  $nodename = $@-&gt;nodename();</code></pre>

<p>Name of the node where error occurred, if available. When this field is non-empty, libxml2 actually returned a physical pointer to the specified node. Due to memory management issues, it is very difficult to implement a way to expose the pointer to the Perl level as a XML::LibXML::Node. For this reason, XML::LibXML::Error currently only exposes the name the node.</p>

</dd>
<dt id="str1">str1</dt>
<dd>

<pre><code>  $error_str1 = $@-&gt;str1();</code></pre>

<p>Error specific. Extra string information.</p>

</dd>
<dt id="str2">str2</dt>
<dd>

<pre><code>  $error_str2 = $@-&gt;str2();</code></pre>

<p>Error specific. Extra string information.</p>

</dd>
<dt id="str3">str3</dt>
<dd>

<pre><code>  $error_str3 = $@-&gt;str3();</code></pre>

<p>Error specific. Extra string information.</p>

</dd>
<dt id="num1">num1</dt>
<dd>

<pre><code>  $error_num1 = $@-&gt;num1();</code></pre>

<p>Error specific. Extra numeric information.</p>

</dd>
<dt id="num2">num2</dt>
<dd>

<pre><code>  $error_num2 = $@-&gt;num2();</code></pre>

<p>In recent libxml2 versions, this value contains a column number of the error or 0 if N/A.</p>

</dd>
<dt id="context">context</dt>
<dd>

<pre><code>  $string = $@-&gt;context();</code></pre>

<p>For parsing errors, this field contains about 80 characters of the XML near the place where the error occurred. The field <code>$@-&gt;column()</code> contains the corresponding offset. Where N/A, the field is undefined.</p>

</dd>
<dt id="column">column</dt>
<dd>

<pre><code>  $offset = $@-&gt;column();</code></pre>

<p>See <code>$@-&gt;column()</code> above.</p>

</dd>
<dt id="prev">_prev</dt>
<dd>

<pre><code>  $previous_error = $@-&gt;_prev();</code></pre>

<p>This field can possibly hold a reference to another XML::LibXML::Error object representing an error which occurred just before this error.</p>

</dd>
</dl>

<h1 id="AUTHORS">AUTHORS</h1>

<p>Matt Sergeant, Christian Glahn, Petr Pajas</p>

<h1 id="VERSION">VERSION</h1>

<p>2.0205</p>

<h1 id="COPYRIGHT">COPYRIGHT</h1>

<p>2001-2007, AxKit.com Ltd.</p>

<p>2002-2006, Christian Glahn.</p>

<p>2006-2009, Petr Pajas.</p>

<h1 id="LICENSE">LICENSE</h1>

<p>This program is free software; you can redistribute it and/or modify it under the same terms as Perl itself.</p>


</body>

</html>


